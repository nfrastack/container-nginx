# SPDX-FileCopyrightText: Â© 2026 Nfrastack <code@nfrastack.com>
#
# SPDX-License-Identifier: MIT

ENABLE_NGINX=${ENABLE_NGINX:-"TRUE"}
#NGINX_AUTHENTICATION_BASIC_PASS=${NGINX_AUTHENTICATION_BASIC_PASS:-"nfrastack"}
#NGINX_AUTHENTICATION_BASIC_USER=${NGINX_AUTHENTICATION_BASIC_USER:-"admin"}
NGINX_AUTHENTICATION_TITLE=${NGINX_AUTHENTICATION_TITLE:-"Please login"}
NGINX_AUTHENTICATION_TYPE=${NGINX_AUTHENTICATION_TYPE:-"NONE"}
NGINX_AUTHENTICATION_LLNG_HANDLER_HOST=${NGINX_AUTHENTICATION_LLNG_HANDLER_HOST:-"llng-handler:2884"}
NGINX_AUTHENTICATION_LLNG_HANDLER_PORT=${NGINX_AUTHENTICATION_LLNG_HANDLER_PORT:-"2884"}
NGINX_DEFAULT_ENABLE_EXPLOIT_PROTECTION=${NGINX_DEFAULT_ENABLE_EXPLOIT_PROTECTION:-"TRUE"}
NGINX_ENABLE_APPLICATION_CONFIGURATION=${NGINX_ENABLE_APPLICATION_CONFIGURATION:-"TRUE"}
NGINX_ENABLE_BLOCK_BOTS=${NGINX_ENABLE_BLOCK_BOTS:-"FALSE"}
NGINX_ENABLE_CACHE_OPEN_FILE=${NGINX_ENABLE_CACHE_OPEN_FILE:-"TRUE"}
NGINX_ENABLE_CLIENT_CACHE=${NGINX_ENABLE_CLIENT_CACHE:-"TRUE"}
NGINX_ENABLE_COMPRESSION_BROTLI=${NGINX_ENABLE_COMPRESSION_BROTLI:-"TRUE"}
NGINX_ENABLE_COMPRESSION_GZIP=${NGINX_ENABLE_COMPRESSION_GZIP:-"TRUE"}
NGINX_ENABLE_CREATE_SAMPLE_HTML=${NGINX_ENABLE_CREATE_SAMPLE_HTML:-"TRUE"}
NGINX_ENABLE_DDOS_PROTECTION=${NGINX_ENABLE_DDOS_PROTECTION:-"FALSE"}
NGINX_ENABLE_EPOLL=${NGINX_ENABLE_EPOLL:-"TRUE"}
NGINX_ENABLE_FASTCGI_HTTPS=${NGINX_ENABLE_FASTCGI_HTTPS:-"FALSE"}
NGINX_ENABLE_HEADERS=${NGINX_ENABLE_HEADERS:-"TRUE"}
NGINX_ENABLE_METRICS=${NGINX_ENABLE_METRICS:-"TRUE"}
NGINX_ENABLE_MULTI_ACCEPT=${NGINX_ENABLE_MULTI_ACCEPT:-"TRUE"}
NGINX_ENABLE_PROXY_BUFFERING=${NGINX_ENABLE_PROXY_BUFFERING:-"TRUE"}
NGINX_ENABLE_RESET_TIMEDOUT_CONNECTION=${NGINX_ENABLE_RESET_TIMEDOUT_CONNECTION:-"TRUE"}
NGINX_ENABLE_REVERSE_PROXY=${NGINX_ENABLE_REVERSE_PROXY:-"TRUE"}
NGINX_ENABLE_SENDFILE=${NGINX_ENABLE_SENDFILE:-"TRUE"}
NGINX_ENABLE_SERVER_TOKENS=${NGINX_ENABLE_SERVER_TOKENS:-"FALSE"}
NGINX_ENABLE_SITE_OPTIMIZATION=${NGINX_ENABLE_SITE_OPTIMIZATION:-"TRUE"}
NGINX_ENABLE_TCPNODELAY=${NGINX_ENABLE_TCPNODELAY:-"TRUE"}
NGINX_ENABLE_TCPNOPUSH=${NGINX_ENABLE_TCPNOPUSH:-"TRUE"}
NGINX_ENABLE_UPSTREAM_KEEPALIVE=${NGINX_ENABLE_UPSTREAM_KEEPALIVE:-"TRUE"}
NGINX_FORCE_RESET_PERMISSIONS=${NGINX_FORCE_RESET_PERMISSIONS:-"TRUE"}
NGINX_GROUP=${NGINX_GROUP:-"www-data"}
NGINX_LISTEN_PORT=${NGINX_LISTEN_PORT:-"80"}
NGINX_LOG_ACCESS_FILE=${NGINX_LOG_ACCESS_FILE:-"access.log"}
NGINX_LOG_ACCESS_FORMAT=${NGINX_LOG_ACCESS_FORMAT:-"standard"}
NGINX_LOG_ACCESS_PATH=${NGINX_LOG_ACCESS_PATH:-"/logs/nginx/"}
NGINX_LOG_BLOCKED_FILE=${NGINX_LOG_BLOCKED_FILE:-"blocked.log"}
NGINX_LOG_BLOCKED_FORMAT=${NGINX_LOG_BLOCKED_FORMAT:-"standard"}
NGINX_LOG_BLOCKED_PATH=${NGINX_LOG_BLOCKED_PATH:-"/logs/nginx/"}
NGINX_LOG_ERROR_FILE=${NGINX_LOG_ERROR_FILE:-"error.log"}
NGINX_LOG_ERROR_PATH=${NGINX_LOG_ERROR_PATH:-"/logs/nginx/"}
NGINX_LOG_LEVEL_ERROR=${NGINX_LOG_LEVEL_ERROR:-"warn"}
NGINX_MAINTENANCE_FILE=${NGINX_MAINTENANCE_FILE:-"index.html"}
NGINX_MAINTENANCE_PATH=${NGINX_MAINTENANCE_PATH:-"/container/data/nginx/maintenance/"}
NGINX_MAINTENANCE_PROXY_URL=${NGINX_MAINTENANCE_PROXY_URL:-"https://www.nfrastack.com"}
NGINX_MAINTENANCE_TYPE=${NGINX_MAINTENANCE_TYPE:-"local"}
NGINX_MODE=${NGINX_MODE:-"NORMAL"}
NGINX_REAL_IP_HEADER=${NGINX_REAL_IP_HEADER:-"X-Forwarded-For"}
NGINX_RELOAD_ON_CONFIG_CHANGE=${NGINX_RELOAD_ON_CONFIG_CHANGE:-"FALSE"}
NGINX_SET_REAL_IP_FROM=${NGINX_SET_REAL_IP_FROM:-"172.16.0.0/12"}
NGINX_UPLOAD_MAX_SIZE=${NGINX_UPLOAD_MAX_SIZE:-"2G"}
NGINX_USER=${NGINX_USER:-"nginx"}
NGINX_WEBROOT=${NGINX_WEBROOT:-"/www/html"}
NGINX_WORKER_PROCESSES=${NGINX_WORKER_PROCESSES:-"1"}

case "${NGINX_AUTHENTICATION_TYPE,,}:${NGINX_LOG_ACCESS_FORMAT,,}" in
    llng:standard)
        NGINX_LOG_ACCESS_FORMAT=llng_standard
        ;;
    llng:json)
        NGINX_LOG_ACCESS_FORMAT=llng_json
        ;;
esac

NGINX_ENABLE_HTTP=${NGINX_ENABLE_HTTP:-"TRUE"}
NGINX_ENABLE_HTTPS=${NGINX_ENABLE_HTTPS:-"FALSE"}
NGINX_ENABLE_HTTP2=${NGINX_ENABLE_HTTP2:-"TRUE"}
NGINX_HTTP_LISTEN_PORT=${NGINX_LISTEN_PORT:-"80"}
NGINX_HTTPS_LISTEN_PORT=${NGINX_HTTPS_LISTEN_PORT:-"443"}

NGINX_TLS_ECDH_CURVE=${NGINX_TLS_ECDH_CURVE:-"X25519:prime256v1:secp384r1"}
NGINX_TLS_PROTOCOLS=${NGINX_TLS_PROTOCOLS:-"TLSv1.3"}
NGINX_TLS_CERT_FILE=${NGINX_TLS_CERT_FILE:-"/certs/nginx/cert.pem"}
NGINX_TLS_KEY_FILE=${NGINX_TLS_KEY_FILE:-"/certs/nginx/key.pem"}
NGINX_TLS_PREFER_SERVER_CIPHERS=${NGINX_TLS_PREFER_SERVER_CIPHERS:-"FALSE"}

# MTLS
#NGINX_TLS_CLIENT_CERT_FILE=${NGINX_TLS_CLIENT_CERT_FILE:-"/certs/nginx/ca-certificates.crt"}
NGINX_TLS_VERIFY_CLIENT=${NGINX_TLS_VERIFY_CLIENT:-"FALSE"}
NGINX_TLS_VERIFY_DEPTH=${NGINX_TLS_VERIFY_DEPTH:-"2"}

# TLS <1.3
NGINX_TLS_CIPHERS=${NGINX_TLS_CIPHERS:-"ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-CHACHA20-POLY1305"}
NGINX_TLS_SESSION_TIMEOUT=${NGINX_TLS_SESSION_TIMEOUT:-"1d"}
NGINX_TLS_SESSION_CACHE=${NGINX_TLS_SESSION_CACHE:-"shared:SSL:10m"}
NGINX_TLS_DH_PARAM_BITS=${NGINX_TLS_DH_PARAM_BITS:-"2048"}
#NGINX_TLS_DH_PARAM_FILE=${NGINX_TLS_DH_PARAM_FILE:-"/certs/nginx/dhparam.pem"}

NGINX_INDEX_FILE=${NGINX_INDEX_FILE:-"index.html index.htm"}
NGINX_SERVER_NAME=${NGINX_SERVER_NAME:-"_"}

NGINX_ENABLE_DENY_HIDDEN_FILES=${NGINX_ENABLE_DENY_HIDDEN_FILES:-"FALSE"}
NGINX_ENABLE_WELLKNOWN_MIMETYPES=${NGINX_ENABLE_WELLKNOWN_MIMETYPES:-"FALSE"}
NGINX_ENABLE_LOG_FAVICON=${NGINX_ENABLE_LOG_FAVICON:-"TRUE"}
NGINX_ENABLE_HTTP_TO_HTTPS=${NGINX_ENABLE_HTTP_TO_HTTPS:-"FALSE"}
NGINX_ENABLE_LOG_ROBOTS=${NGINX_ENABLE_LOG_ROBOTS:-"TRUE"}
NGINX_ENABLE_SYMLINKS=${NGINX_ENABLE_SYMLINKS:-"FALSE"}
NGINX_TLS_CREATE_SELFSIGNED=${NGINX_TLS_CREATE_SELFSIGNED:-"TRUE"}
NGINX_CONFIG_PATH=${NGINX_CONFIG_PATH:-"/etc/nginx/"}
NGINX_CONFIG_FILE=${NGINX_CONFIG_FILE:-"server.conf"}
NGINX_BLOCKBOTS_CONFIG_CUSTOM_PATH=${NGINX_BLOCKBOTS_CONFIG_CUSTOM_PATH:-"${CONFIG_PATH%/}/blockbots-custom/"}
NGINX_ENABLE_PCRE_JIT=${NGINX_ENABLE_PCRE_JIT:-"TRUE"}
NGINX_ENABLE_UWSGI_PARAMS=${NGINX_ENABLE_UWSGI_PARAMS:-"FALSE"}
NGINX_ENABLE_FASTCGI_PARAMS=${NGINX_ENABLE_FASTCGI_PARAMS:-"TRUE"}
NGINX_ENABLE_SCGI_PARAMS=${NGINX_ENABLE_SCGI_PARAMS:-"FALSE"}
NGINX_MIME_TYPES_PATH=${NGINX_MIME_TYPES_PATH:-"${NGINX_CONFIG_PATH%/}/${NGINX_CONFIG_FILE%/}.d/"}
NGINX_MIME_TYPES_FILE=${NGINX_MIME_TYPES_FILE:-"mime.types"}
NGINX_PROXY_HEADERS_HASH_MAX_SIZE=${NGINX_PROXY_HEADERS_HASH_MAX_SIZE:-"1024"}
NGINX_PROXY_HEADERS_HASH_BUCKET_SIZE=${NGINX_PROXY_HEADERS_HASH_BUCKET_SIZE:-"128"}


get_defaults_advanced
